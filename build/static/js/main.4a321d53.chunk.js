(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){e.exports=n(44)},24:function(e,t,n){},25:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=(n(24),n(7)),s=n(18),i=n(5),l=(n(25),function(e){var t=e.searchText,n=e.handleSearchText;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Search"),r.a.createElement("input",{type:"search",value:t,onChange:n,placeholder:"Search for names or numbers...","aria-label":"Search for contacts with their names or numbers"}))}),m=function(e){var t=e.handleAddContact,n=e.newName,a=e.handleTextInput,c=e.newNumber,o=e.handleNumberInput;return r.a.createElement("form",{onSubmit:function(e){return t(e)}},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:n,onChange:a,placeholder:"Add contact's name...","aria-label":"Add contact's name"}),r.a.createElement("input",{type:"tel",value:c,onChange:o,placeholder:"Add contact's number...","aria-label":"Add contact's number"})),r.a.createElement("div",null,r.a.createElement("button",{id:"add-contact",type:"submit"},"Add")))},d=function(e){var t,n=e.searchText,a=e.persons,c=e.handleContactUpdate,o=e.handleContactDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Contacts"),r.a.createElement("ul",{id:"contacts-list"},(t=n,a.filter((function(e){var n;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase().includes(t.trim()))?e.name.toLowerCase().includes(t.trim()):e.number.toLowerCase().includes(t.trim())?e.number.toLowerCase().includes(t.trim()):null})).map((function(e){return r.a.createElement("li",{key:e.id},e.name,": ",e.number," ",r.a.createElement("br",null),r.a.createElement("button",{className:"update-btn",onClick:function(){return c(e)}},"Update"),r.a.createElement("button",{className:"delete-btn",onClick:function(){o(e)}},"Delete"))})))))},f=n(2),p=n.n(f),b=n(3),h=n(4),v=n.n(h),C="/api/persons",w={getAllContacts:function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.a.get(C),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addContact:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.a.post(C,t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateContact:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.patch("".concat(C,"/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),replaceContact:function(){var e=Object(b.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.a.put("".concat(C,"/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteContact:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return n=v.a.delete("".concat(C,"/").concat(t)),e.next=4,n;case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=function(e){var t=e.messageAndStatus,n=t.message,a=t.status;return console.log(n,a),r.a.createElement("div",{className:"notification-toast ".concat(a)},n&&r.a.createElement("p",null,n))},g=n(46),j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),f=Object(i.a)(o,2),p=f[0],b=f[1],h=Object(a.useState)(""),v=Object(i.a)(h,2),C=v[0],j=v[1],x=Object(a.useState)(""),y=Object(i.a)(x,2),O=y[0],k=y[1],S=Object(a.useState)({message:"",status:""}),A=Object(i.a)(S,2),T=A[0],N=A[1];Object(a.useEffect)((function(){var e=!0;return w.getAllContacts().then((function(t){return e?c(t):null})),function(){return e=!1}}),[]),Object(a.useEffect)((function(){var e=setTimeout((function(){N({message:"",status:""})}),5e3);return function(){return clearTimeout(e)}}),[T.status]);return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(E,{messageAndStatus:T}),r.a.createElement(m,{handleAddContact:function(e){e.preventDefault();var t,a={name:p.trim(),number:C.trim(),id:Object(g.a)()},r=Object(s.a)(n);try{for(r.s();!(t=r.n()).done;){var o,i=t.value;if((null===(o=i.number)||void 0===o?void 0:o.trim())===a.number)return alert("This number has already been registered in your phonebook!"),null;if(""===a.name||""===a.number)return alert("Contact details cannot be empty!"),null;if(i.name.toLowerCase().trim()===a.name.toLowerCase()){if(!window.confirm('Contact with name "'.concat(a.name,'" already exists in the phonebook! Replace the old number with this new one?')))return null;var l=function(){var e=i;return{v:w.replaceContact(e.id,Object(u.a)(Object(u.a)({},i),{},{number:a.number})).then((function(t){c(n.map((function(n){return n.id!==e.id?n:t}))),N({message:"Contact ".concat(e.name," updated successfully."),status:"success"}),b(""),j("")})).catch((function(t){console.error(t),N({message:"Error updating contact ".concat(e.name,"."),status:"error"})}))}}();if("object"===typeof l)return l.v}}}catch(m){r.e(m)}finally{r.f()}w.addContact(a).then((function(e){c(n.concat(e)),N({message:"Added ".concat(a.name,"!"),status:"success"})})).catch((function(e){console.error(e),N({message:"Error adding contact.",status:"error"})})),b(""),j("")},newName:p,handleTextInput:function(e){b(e.target.value)},newNumber:C,handleNumberInput:function(e){j(e.target.value)}}),r.a.createElement(l,{searchText:O,handleSearchText:function(e){k(e.target.value.toLowerCase())}}),r.a.createElement(d,{searchText:O,persons:n,handleContactUpdate:function(e){if(window.confirm("Update this contact?")){var t=prompt("Update contact name.",e.name)||e.name,a=prompt("Update contact number.",e.number)||e.number;t.trim()&&a.trim()&&w.updateContact(e.id,{name:t.trim(),number:a.trim()}).then((function(t){c(n.map((function(n){return n.id!==e.id?n:t}))),N({message:"Contact ".concat(t.name," updated successfully."),status:"success"})})).catch((function(t){N({message:"Error: contact ".concat(e.name," already removed from server."),status:"error"}),console.error(t)}))}},handleContactDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&w.deleteContact(e.id).then((function(){c(n.filter((function(t){return t.id!==e.id}))),N({message:"Contact ".concat(e.name," deleted."),status:"success"})})).catch((function(t){console.error(t),N({message:"Error deleting contact ".concat(e.name,"."),status:"error"})}))}}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.4a321d53.chunk.js.map